@model Quiz_6XXXXXX_Student.Models.ViewModels.ScoreViewModel
@{
    ViewData["Title"] = "Calculate Form";
    Layout = "~/Views/Shared/_StudentLayout.cshtml";
}

<div class="d-flex align-items-center mb-4">
    <i class="fas fa-calculator fa-2x text-primary me-3"></i>
    <div>
        <h3 class="mb-0 fw-bold">คำนวณคะแนน</h3>
        <small class="text-muted">กรอกคะแนนเก็บ 10 ครั้ง (คะแนนเต็ม 100)</small>
    </div>
</div>

<div class="row">
    <div class="col-lg-6">
        <div class="card shadow border-0 mb-4">
            <div class="card-header bg-primary text-white">
                <i class="fas fa-pen me-2"></i>กรอกคะแนน
            </div>
            <div class="card-body">
                <form asp-action="CalculateForm" asp-controller="Account" method="post">
                    @for (int i = 1; i <= 10; i++)
                    {
                        <div class="mb-3">
                            <label class="form-label fw-semibold">ครั้งที่ @i</label>
                            <input type="number" name="Score@i" class="form-control" min="0" max="100" step="0.01"
                                   value="@(i == 1 ? Model.Score1 : i == 2 ? Model.Score2 : i == 3 ? Model.Score3 : i == 4 ? Model.Score4 : i == 5 ? Model.Score5 : i == 6 ? Model.Score6 : i == 7 ? Model.Score7 : i == 8 ? Model.Score8 : i == 9 ? Model.Score9 : Model.Score10)"
                                   placeholder="0 - 100" required />
                        </div>
                    }
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fas fa-chart-bar me-2"></i>คำนวณคะแนน
                    </button>
                </form>
            </div>
        </div>
    </div>

    @if (ViewBag.Grade != null)
    {
        <div class="col-lg-6">
            <div class="card shadow border-0">
                <div class="card-header bg-success text-white">
                    <i class="fas fa-chart-pie me-2"></i>ผลการคำนวณ
                </div>
                <div class="card-body text-center py-4">
                    <p class="fs-5 mb-2">คะแนนรวมทั้งหมด : <strong>@ViewBag.Total</strong> คะแนน</p>
                    <p class="fs-5 mb-3">คะแนนเฉลี่ย : <strong>@ViewBag.Average</strong> คะแนน</p>
                    <div class="mt-3">
                        <p class="mb-2 fw-semibold">เกรดที่ได้</p>
                        @{
                            string grade = ViewBag.Grade;
                            string badgeColor = grade == "A" ? "success" : grade == "B" ? "info" : grade == "C" ? "warning" : grade == "D" ? "secondary" : "danger";
                        }
                        <span class="badge bg-@badgeColor" style="font-size: 4rem; padding: 0.6em 1.2em; border-radius: 12px;">
                            @ViewBag.Grade
                        </span>
                        <div class="mt-3 text-muted small">
                            A = 80-100 | B = 70-79 | C = 60-69 | D = 50-59 | F = ต่ำกว่า 50
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
